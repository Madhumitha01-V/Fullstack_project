<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <title>My Account - Perfumy</title>
</head>
<body>
    <header class="header">
        <nav class="navbar">
            <div class="logo">
                <h1>Perfumy</h1>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="index.html#products">Products</a></li>
                <li><a href="index.html#about">About Us</a></li>
                <li><a href="index.html#contact">Contact</a></li>
            </ul>
            <div class="user-actions" id="userActions">
                <a href="cart.html" class="cart-icon" id="cartIcon" title="Shopping Cart">
                    <span class="icon">üõí</span>
                    <span class="cart-count" id="cartCount">0</span>
                </a>
                <div class="user-account">
                    <button class="account-btn" id="accountBtn">
                        <span class="icon">üë§</span>
                        <span class="username" id="username">Account</span>
                    </button>
                    <div class="account-dropdown" id="accountDropdown">
                        <a href="account.html">My Account</a>
                        <a href="cart.html">My Cart</a>
                        <a href="#" id="logoutBtn">Logout</a>
                    </div>
                </div>
            </div>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </nav>
    </header>

    <section class="account-section">
        <div class="container">
            <div class="account-container">
                <div class="account-sidebar">
                    <div class="user-profile">
                        <div class="profile-avatar">
                            <span class="avatar-icon">üë§</span>
                        </div>
                        <h3 id="userFullName">Welcome!</h3>
                        <p id="userEmail">user@example.com</p>
                    </div>

                    <nav class="account-nav">
                        <a href="#profile" class="nav-item active" data-section="profile">
                            <span class="nav-icon">üë§</span>
                            Profile Information
                        </a>
                        <a href="#favorites" class="nav-item" data-section="favorites">
                            <span class="nav-icon">‚ù§Ô∏è</span>
                            My Favorites
                        </a>
                        <a href="#cart" class="nav-item" data-section="cart">
                            <span class="nav-icon">üõí</span>
                            My Cart
                        </a>
                        <a href="#orders" class="nav-item" data-section="orders">
                            <span class="nav-icon">üì¶</span>
                            Order History
                        </a>
                        <a href="#" class="nav-item logout-btn" id="sidebarLogout">
                            <span class="nav-icon">üö™</span>
                            Logout
                        </a>
                    </nav>
                </div>

                <div class="account-content">
                    <!-- Profile Section -->
                    <div id="profile-section" class="content-section active">
                        <h2>üë§ Profile Information</h2>
                        <div class="profile-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="firstName">First Name</label>
                                    <input type="text" id="firstName" readonly>
                                </div>
                                <div class="form-group">
                                    <label for="lastName">Last Name</label>
                                    <input type="text" id="lastName" readonly>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="email">Email Address</label>
                                <input type="email" id="email" readonly>
                            </div>
                            <div class="form-group">
                                <label for="phone">Phone Number</label>
                                <input type="tel" id="phone" readonly>
                            </div>
                            <button class="edit-profile-btn" id="editProfileBtn">
                                <span class="btn-icon">‚úèÔ∏è</span>
                                Edit Profile
                            </button>
                        </div>
                    </div>

                    <!-- Favorites Section -->
                    <div id="favorites-section" class="content-section">
                        <h2>‚ù§Ô∏è My Favorites</h2>
                        <div class="favorites-grid" id="favoritesGrid">
                            <!-- Favorites will be populated by JavaScript -->
                            <div class="empty-state" id="emptyFavorites">
                                <div class="empty-icon">‚ù§Ô∏è</div>
                                <h3>No favorites yet</h3>
                                <p>Start adding products to your favorites!</p>
                                <a href="index.html#products" class="shop-now-btn">Browse Products</a>
                            </div>
                        </div>
                    </div>

                    <!-- Cart Section -->
                    <div id="cart-section" class="content-section">
                        <h2>üõí My Cart</h2>
                        <div class="cart-preview" id="cartPreview">
                            <!-- Cart items will be populated by JavaScript -->
                            <div class="empty-state" id="emptyCartPreview">
                                <div class="empty-icon">üõí</div>
                                <h3>Your cart is empty</h3>
                                <p>Add some fragrances to your cart!</p>
                                <a href="index.html#products" class="shop-now-btn">Shop Now</a>
                            </div>
                        </div>
                        <div class="cart-actions">
                            <a href="cart.html" class="view-cart-btn">
                                <span class="btn-icon">üõí</span>
                                View Full Cart
                            </a>
                        </div>
                    </div>

                    <!-- Orders Section -->
                    <div id="orders-section" class="content-section">
                        <h2>üì¶ Order History</h2>
                        <div class="orders-list" id="ordersList">
                            <div class="empty-state">
                                <div class="empty-icon">üì¶</div>
                                <h3>No orders yet</h3>
                                <p>Your order history will appear here once you make a purchase.</p>
                                <a href="index.html#products" class="shop-now-btn">Start Shopping</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="script.js"></script>
    <script>
        // Account page specific functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in before loading account page
            if (!isUserLoggedIn()) {
                alert('Please login to access your account!');
                window.location.href = 'login.html';
                return;
            }

            initializeUserState();
            loadUserProfile();
            loadFavorites();
            loadCartPreview();
            setupAccountEventListeners();
        });

        function loadUserProfile() {
            const user = JSON.parse(localStorage.getItem('perfumy_user') || '{}');

            if (user.firstName && user.lastName) {
                document.getElementById('userFullName').textContent = `${user.firstName} ${user.lastName}`;
                document.getElementById('firstName').value = user.firstName;
                document.getElementById('lastName').value = user.lastName;
            }

            if (user.email) {
                document.getElementById('userEmail').textContent = user.email;
                document.getElementById('email').value = user.email;
            }

            if (user.phone) {
                document.getElementById('phone').value = user.phone;
            }
        }

        function loadFavorites() {
            const favorites = JSON.parse(localStorage.getItem('perfumy_favorites') || '[]');
            const favoritesGrid = document.getElementById('favoritesGrid');
            const emptyFavorites = document.getElementById('emptyFavorites');

            if (favorites.length === 0) {
                emptyFavorites.style.display = 'block';
                return;
            }

            emptyFavorites.style.display = 'none';

            favorites.forEach(productId => {
                const product = getProductById(productId);
                if (product) {
                    const favoriteElement = createFavoriteElement(product);
                    favoritesGrid.appendChild(favoriteElement);
                }
            });
        }

        function createFavoriteElement(product) {
            const element = document.createElement('div');
            element.className = 'favorite-item';
            element.innerHTML = `
                <div class="favorite-image">
                    <img src="${product.image}" alt="${product.name}">
                    <button class="remove-favorite" data-product-id="${product.id}">
                        <span class="remove-icon">‚ùå</span>
                    </button>
                </div>
                <div class="favorite-info">
                    <h4>${product.name}</h4>
                    <p class="price">‚Çπ${product.price.toLocaleString()}</p>
                    <button class="add-to-cart-btn" data-product-id="${product.id}">
                        <span class="btn-icon">üõí</span>
                        Add to Cart
                    </button>
                </div>
            `;
            return element;
        }

        function loadCartPreview() {
            const cart = JSON.parse(localStorage.getItem('perfumy_cart') || '[]');
            const cartPreview = document.getElementById('cartPreview');
            const emptyCartPreview = document.getElementById('emptyCartPreview');

            if (cart.length === 0) {
                emptyCartPreview.style.display = 'block';
                return;
            }

            emptyCartPreview.style.display = 'none';

            cart.slice(0, 3).forEach(item => {
                const cartElement = createCartPreviewElement(item);
                cartPreview.insertBefore(cartElement, document.querySelector('.cart-actions'));
            });

            if (cart.length > 3) {
                const moreItems = document.createElement('p');
                moreItems.className = 'more-items';
                moreItems.textContent = `And ${cart.length - 3} more item(s) in your cart...`;
                cartPreview.insertBefore(moreItems, document.querySelector('.cart-actions'));
            }
        }

        function createCartPreviewElement(item) {
            const element = document.createElement('div');
            element.className = 'cart-preview-item';
            element.innerHTML = `
                <div class="cart-preview-image">
                    <img src="${item.image}" alt="${item.name}">
                </div>
                <div class="cart-preview-info">
                    <h4>${item.name}</h4>
                    <p>Quantity: ${item.quantity}</p>
                    <p class="price">‚Çπ${(item.price * item.quantity).toLocaleString()}</p>
                </div>
            `;
            return element;
        }

        function setupAccountEventListeners() {
            // Navigation tabs
            document.querySelectorAll('.nav-item[data-section]').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.dataset.section;
                    switchSection(section);
                });
            });

            // Edit profile
            document.getElementById('editProfileBtn').addEventListener('click', function() {
                alert('Profile editing functionality will be implemented!');
            });

            // Remove favorite
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('remove-favorite') || e.target.closest('.remove-favorite')) {
                    const productId = parseInt(e.target.dataset.productId || e.target.closest('.remove-favorite').dataset.productId);
                    removeFromFavorites(productId);
                }

                if (e.target.classList.contains('add-to-cart-btn')) {
                    const productId = parseInt(e.target.dataset.productId);
                    addToCartFromFavorites(productId);
                }
            });

            // Logout
            document.getElementById('sidebarLogout').addEventListener('click', function(e) {
                e.preventDefault();
                logout();
            });
        }

        function switchSection(sectionName) {
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-section="${sectionName}"]`).classList.add('active');

            // Update content
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(`${sectionName}-section`).classList.add('active');
        }

        function removeFromFavorites(productId) {
            const favorites = JSON.parse(localStorage.getItem('perfumy_favorites') || '[]');
            const updatedFavorites = favorites.filter(id => id !== productId);
            localStorage.setItem('perfumy_favorites', JSON.stringify(updatedFavorites));
            loadFavorites();
        }

        function addToCartFromFavorites(productId) {
            const product = getProductById(productId);
            if (product) {
                addToCart(product);
                alert(`${product.name} added to cart!`);
            }
        }

        function getProductById(id) {
            const products = [
                { id: 1, name: "Elegant Rose", price: 3999, image: "https://images.unsplash.com/photo-1592945403244-b3fbafd7f539?w=400&auto=format&fit=crop&q=60&ixlib=rb-4.0.3", description: "A sophisticated blend of rose petals and vanilla" },
                { id: 2, name: "Midnight Jasmine", price: 3499, image: "https://images.unsplash.com/photo-1615634260167-c8cdede054de?w=400&auto=format&fit=crop&q=60&ixlib=rb-4.0.3", description: "An intoxicating jasmine scent with hints of sandalwood" },
                { id: 3, name: "Citrus Breeze", price: 2999, image: "https://tse1.mm.bing.net/th/id/OIP.ZWzP-beK0QjTRbC7OwXvJAHaHa?rs=1&pid=ImgDetMain&o=7&rm=3", description: "A refreshing citrus explosion with undertones of fresh herbs" },
                { id: 4, name: "Ocean Mist", price: 4499, image: "https://images.unsplash.com/photo-1594035910387-fea47794261f?w=400&auto=format&fit=crop&q=60&ixlib=rb-4.3", description: "A fresh aquatic scent with sea salt and marine notes" },
                { id: 5, name: "Amber Nights", price: 4999, image: "https://images.unsplash.com/photo-1608571423902-eed4a5ad8108?w=400&auto=format&fit=crop&q=60&ixlib=rb-4.0.3", description: "Warm amber and patchouli blend with spicy notes" },
                { id: 6, name: "Lavender Dreams", price: 2499, image: "https://images.unsplash.com/photo-1587304655801-beb15c4dfd25?w=400&auto=format&fit=crop&q=60&ixlib=rb-4.0.3", description: "Calming lavender essence with chamomile and vanilla" },
                { id: 7, name: "Spicy Oud", price: 6499, image: "https://images.unsplash.com/photo-1696218092661-973ab1fed5b8?w=400&auto=format&fit=crop&q=60&ixlib=rb-4.0.3", description: "Rich oud wood with cardamom and cinnamon" },
                { id: 8, name: "Fresh Mint", price: 1999, image: "https://images.unsplash.com/photo-1458538977777-0549b2370168?w=400&auto=format&fit=crop&q=60&ixlib=rb-4.0.3", description: "Cool mint leaves with green tea and citrus" },
                { id: 9, name: "Vanilla Orchid", price: 3499, image: "https://tse2.mm.bing.net/th/id/OIP.APC1Bedupd0Uo97ZazalqgHaIf?rs=1&pid=ImgDetMain&o=7&rm=3", description: "Sweet vanilla orchid with coconut and musk" }
            ];
            return products.find(p => p.id === id);
        }
    </script>
</body>
</html>  check whether the code is correct or not if any error fix and generate me the full code